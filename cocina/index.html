<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,interactive-widget=resizes-content"/>
  <meta name="theme-color" content="#0b1220"/>
  <title>Cocina — Seven de Burgers</title>
  <link rel="icon" href="../favicon.ico">
  <link rel="stylesheet" href="../shared/styles.css">

  <!-- Parche anti saltos -->
  <style>
    /* 1) El body NO scrollea; scrollea el contenedor */
    html, body { height: 100%; overflow: hidden; background: #0b1220; }
    /* 2) Contenedor con alto fijo (svh evita barra de URL de iOS) */
    .container { height: 100svh; overflow: auto; -webkit-overflow-scrolling: touch; }
    /* 3) Columnas contienen su propio layout/paint (menos reflujo global) */
    .k-columns { contain: layout; }
    .k-col { contain: layout paint; min-height: 40vh; }
    /* 4) Evita “scroll anchoring” raro en iOS */
    .col { overflow-anchor: none; }
    /* 5) Padding seguro para barras/gestos */
    .container { padding-bottom: max(12px, env(safe-area-inset-bottom)); }
  </style>
</head>
<body class="shell">

  <div class="container" role="main" id="appRoot">
    <div class="row" style="margin-bottom:10px">
      <a class="badge" href="../kiosk/">Kiosko</a>
      <div class="right badge" aria-current="page">Cocina</div>
    </div>

    <div id="live-region" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>

    <div class="k-columns">
      <div class="card">
        <h2>Pendientes</h2>
        <div id="col-pending"  class="col k-col" aria-label="Órdenes pendientes"></div>
      </div>
      <div class="card">
        <h2>En preparación</h2>
        <div id="col-progress" class="col k-col" aria-label="Órdenes en preparación"></div>
      </div>
      <div class="card">
        <h2>Listos</h2>
        <div id="col-ready" class="col k-col" aria-label="Órdenes listas para entregar"></div>
      </div>
      <div class="card">
        <h2>Por cobrar</h2>
        <div id="col-bill" class="col k-col" aria-label="Órdenes por cobrar"></div>
      </div>
    </div>
  </div>

  <!-- Ruta moderna -->
  <script type="module" src="./app.js"></script>

  <!-- Legacy (iOS viejito) -->
  <script nomodule src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3/dist/fetch.umd.js"></script>
  <script nomodule>
  (function(){ if(!window.console){window.console={};['log','warn','error','info'].forEach(function(m){console[m]=function(){}});} })();
  if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
      var el = this; if(!document.documentElement.contains(el)) return null;
      do { if(el.matches && el.matches(s)) return el; el = el.parentElement || el.parentNode; } while (el && el.nodeType === 1);
      return null;
    };
  }
  if (window.NodeList && !NodeList.prototype.forEach) NodeList.prototype.forEach = Array.prototype.forEach;
  if (!Object.assign) Object.assign = function(t){ for(var i=1;i<arguments.length;i++){ var s=arguments[i]||{}; for(var k in s){ if(Object.prototype.hasOwnProperty.call(s,k)) t[k]=s[k]; } } return t; };
  if (!String.prototype.includes) String.prototype.includes = function(s,i){ return this.indexOf(s,i||0)!==-1; };
  </script>

  <script nomodule src="../shared/compat.js"></script>
  <script nomodule src="../shared/notify.legacy.js"></script>
  <script nomodule src="../shared/db.legacy.js"></script>
  <script nomodule src="./app.legacy.js"></script>
</body>
</html>