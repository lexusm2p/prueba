<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="../shared/styles.css"/>
  <title>Admin — Seven de Burgers</title>
  <style>
    .grid-admin{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}
    .mini-table{width:100%;border-collapse:collapse}
    .mini-table th,.mini-table td{border-bottom:1px solid var(--stroke);padding:8px 6px;font-size:12px}
    .row.gap8{display:flex;gap:8px;flex-wrap:wrap}
    .chips{display:flex;flex-wrap:wrap;gap:6px}
    .chip{background:#1c2436;border:1px solid var(--stroke);padding:6px 8px;border-radius:10px;font-size:12px}
    .k-list{max-height:360px;overflow:auto;border:1px solid var(--stroke);border-radius:10px}
    .k-list .item{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;padding:10px 12px;border-bottom:1px solid var(--stroke)}
    .k-list .item:last-child{border-bottom:none}
    .pill{background:#18243a;color:var(--ink);padding:4px 8px;border-radius:10px;font-size:11px}
    .muted small code{background:#0c1322;padding:2px 4px;border-radius:6px}
  </style>
</head>
<body>
<header class="header">
  <div class="brand">
    <span class="dot"></span>
    <div>
      <div>Seven de Burgers</div>
      <div class="title-sub">Admin</div>
    </div>
  </div>
  <nav class="row" style="gap:8px">
    <a class="btn ghost small" href="../kiosk/index.html">Ir al Kiosko</a>
    <a class="btn ghost small" href="../cocina/index.html">Cocina</a>
    <a class="btn ghost small" href="../mesero/index.html">Mesero</a>
  </nav>
</header>

<main class="container">
  <div class="grid-admin">

    <!-- Productos -->
    <section class="card">
      <h3 style="margin:0 0 10px">Productos</h3>

      <div class="row gap8">
        <div style="flex:1 1 280px;min-width:280px">
          <div class="field">
            <label>Nombre</label>
            <input id="pName" type="text" placeholder="Koopa Crunch"/>
          </div>
          <div class="field">
            <label>Tipo</label>
            <select id="pType">
              <option value="big">Hamburguesa grande</option>
              <option value="mini">Mini</option>
            </select>
          </div>
          <div class="field">
            <label>Precio</label>
            <input id="pPrice" type="number" min="0" step="1" value="0"/>
          </div>
          <div class="field">
            <label>Ingredientes base (uno por línea)</label>
            <textarea id="pIngredients" rows="4" placeholder="Pan&#10;Carne 85g&#10;Queso blanco"></textarea>
          </div>
          <div class="field">
            <label>Salsa por defecto (opcional)</label>
            <input id="pSalsaDefault" type="text" placeholder="Salsa Chimichurri"/>
          </div>
          <div class="field">
            <label>Aderezos recomendados (coma separada)</label>
            <input id="pSalsasSugeridas" type="text" placeholder="Salsa Chimichurri, Aderezo chipotle"/>
          </div>
        </div>

        <div style="flex:1 1 280px;min-width:280px">
          <div class="field">
            <label>Icono (URL opcional)</label>
            <input id="pIcon" type="url" placeholder="https://.../koopa.png"/>
          </div>
          <div class="field">
            <label>Para MINIs: baseOf (id de la grande)</label>
            <input id="pBaseOf" type="text" placeholder="id de la hamburguesa grande"/>
            <div class="muted small">Si este producto es mini, indica el <b>id</b> de su versión grande (para heredar ingredientes).</div>
          </div>
          <div class="field">
            <label>Activo</label>
            <div class="row" style="align-items:center;gap:8px">
              <input id="pActive" type="checkbox" checked/> <span class="muted small">Visible en kiosko</span>
            </div>
          </div>

          <div class="row" style="justify-content:flex-end;gap:8px">
            <button class="btn ghost" id="btnResetProd" type="button">Limpiar</button>
            <button class="btn" id="btnSaveProd" type="button">Guardar/Actualizar</button>
          </div>

          <div class="muted small" style="margin-top:6px">
            * Guarda en colección <code>products</code>. Si estás editando, se mantiene el <b>id</b>.
          </div>

          <input type="hidden" id="pId"/>
        </div>
      </div>

      <div class="hr"></div>

      <h4 style="margin:8px 0">Listado</h4>
      <div class="k-list" id="prodList"><div class="muted small" style="padding:10px">Cargando…</div></div>
    </section>

    <!-- Extras -->
    <section class="card">
      <h3 style="margin:0 0 10px">Extras (aderezos e ingredientes)</h3>

      <div class="row gap8">
        <div style="flex:1 1 280px;min-width:280px">
          <h4>Aderezos</h4>
          <table class="mini-table" id="tblSauces">
            <thead><tr><th>Nombre</th><th style="width:90px;text-align:right">Precio</th><th></th></tr></thead>
            <tbody></tbody>
          </table>
          <div class="row" style="margin-top:8px;gap:8px">
            <button class="btn ghost small" id="btnAddSauceRow" type="button">+ Fila</button>
            <button class="btn small" id="btnSaveSauces" type="button">Guardar aderezos</button>
          </div>
          <div class="muted small" style="margin-top:6px">Se almacenan en <code>extras/sauces</code> (array <code>items</code>).</div>
        </div>

        <div style="flex:1 1 280px;min-width:280px">
          <h4>Ingredientes extra</h4>
          <table class="mini-table" id="tblIngs">
            <thead><tr><th>Nombre</th><th style="width:90px;text-align:right">Precio</th><th></th></tr></thead>
            <tbody></tbody>
          </table>
          <div class="row" style="margin-top:8px;gap:8px">
            <button class="btn ghost small" id="btnAddIngRow" type="button">+ Fila</button>
            <button class="btn small" id="btnSaveIngs" type="button">Guardar ingredientes</button>
          </div>
          <div class="muted small" style="margin-top:6px">Se almacenan en <code>extras/ingredients</code> (array <code>items</code>).</div>
        </div>
      </div>
    </section>

    <!-- Settings -->
    <section class="card">
      <h3 style="margin:0 0 10px">Settings (globales)</h3>
      <div class="row gap8">
        <div class="field" style="min-width:180px">
          <label>DLC Carne Mini (+)</label>
          <input id="sDlc" type="number" min="0" step="1" value="12"/>
        </div>
        <div class="field" style="min-width:180px">
          <label>Precio global aderezos</label>
          <input id="sSaucePrice" type="number" min="0" step="1" value="8"/>
        </div>
        <div class="field" style="min-width:180px">
          <label>Precio global extras</label>
          <input id="sIngPrice" type="number" min="0" step="1" value="10"/>
        </div>
      </div>
      <div class="row" style="justify-content:flex-end;gap:8px">
        <button class="btn" id="btnSaveSettings" type="button">Guardar settings</button>
      </div>
      <div class="muted small" style="margin-top:6px">Se guardan en <code>settings/app</code>. El kiosko los toma en tiempo real.</div>
    </section>

  </div>
</main>

<script type="module" src="./app.js"></script>
</body>
</html>
