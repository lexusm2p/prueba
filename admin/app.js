
import { db } from '../shared/db.js';
import { collection, addDoc, setDoc, doc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js';
import { beep, toast } from '../shared/notify.js';
document.getElementById('btnAddPurchase').onclick=async()=>{ const name=document.getElementById('pName').value.trim(); const qty=+document.getElementById('pQty').value||0; const cost=+document.getElementById('pCost').value||0; if(!name||qty<=0){alert('Completa nombre y cantidad');return;} await addDoc(collection(db,'purchases'),{name,qty,cost,createdAt:serverTimestamp()}); beep(); toast('Compra registrada ✔️'); };
document.getElementById('btnSetIng').onclick=async()=>{ const name=document.getElementById('iName').value.trim(); const cost=+document.getElementById('iCost').value||0; if(!name){alert('Nombre requerido');return;} await setDoc(doc(db,'ingredients',name.toLowerCase()),{name,cost,updatedAt:serverTimestamp()}); beep(); toast('Ingrediente actualizado ✔️'); };
document.getElementById('btnSaveRecipe').onclick=async()=>{ const name=document.getElementById('rName').value.trim(); const yieldMl=+document.getElementById('rYield').value||0; const notes=document.getElementById('rNotes').value.trim(); if(!name){alert('Nombre requerido');return;} await addDoc(collection(db,'recipes'),{name,yieldMl,notes,createdAt:serverTimestamp()}); beep(); toast('Receta guardada ✔️'); };
